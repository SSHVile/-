<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>~vile_personal site</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* Variables for easy color adjustments */
        :root {
            --desktop-bg: #1c1c24; 
            --star-color: #ff4081; 
            --folder-bg: #323d4b; 
            --folder-border: #00ff9c; 
            --terminal-bg: #1a1a1a;
            --terminal-border: #ff4081; 
            --terminal-text: #00ff9c; 
            --prompt-user: #c592ff; 
            --prompt-path: #66ffcc; 
            --white-text: #f0f0f0;
            --red-control: #ff5f56;
            --yellow-control: #ffbd2e;
            --green-control: #27c93f;
            --dock-bg: #202028;
            --dock-shadow: rgba(0, 0, 0, 0.5);
            --font-family: 'Share Tech Mono', monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow: hidden; 
        }

        /* --- Desktop Background and Dynamic Stars Container --- */
        .desktop {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: var(--desktop-bg);
            font-family: var(--font-family);
            color: var(--terminal-text);
            background-image: radial-gradient(circle at center, #2e2e3f 1%, var(--desktop-bg) 100%);
        }

        /* Styling for the dynamic star elements */
        .star-trail {
            position: absolute;
            width: 10px; 
            height: 10px;
            background: transparent;
            border-radius: 50%;
            pointer-events: none; 
            opacity: 1;
            z-index: 10;
            
            box-shadow: 
                0 0 1px 1px currentColor,
                0 0 5px currentColor,
                0 0 10px currentColor;

            animation: fadeAndShrink 0.8s ease-out forwards;
        }

        @keyframes fadeAndShrink {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* --- Top Bar and Dock Z-index --- */
        .top-bar, .dock {
            z-index: 100;
        }

        /* --- Folder Icons (Unchanged) --- */
        .folder-area {
            position: absolute;
            top: 50px; 
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 5;
        }

        .folder-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            text-align: center;
            width: 120px; 
            user-select: none;
        }

        .folder-icon {
            width: 50px;
            height: 50px;
            background-color: var(--folder-bg);
            border: 1px solid var(--folder-border);
            box-shadow: 0 0 5px var(--folder-border);
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
            position: relative;
        }
        .folder-icon:after {
            content: 'üíª'; 
            position: absolute;
            font-size: 2em;
            filter: drop-shadow(0 0 2px var(--folder-border));
        }

        .folder-text {
            color: var(--white-text);
            font-size: 0.9em;
            padding: 2px 0;
        }

        /* --- Terminal Windows --- */
        .terminal-container {
            position: absolute;
            top: 50px;
            right: 20px;
            left: 20px; /* Extend container to support absolute positioning across the whole desktop */
            bottom: 60px;
        }

        .terminal-window {
            background-color: var(--terminal-bg);
            border: 2px solid var(--terminal-border);
            box-shadow: 0 0 10px rgba(255, 64, 129, 0.8), 0 0 20px rgba(0, 255, 156, 0.4);
            position: absolute; /* Essential for dragging */
            width: 450px;
            min-height: 150px;
            z-index: 20; 
            font-size: 0.85em;
            resize: both; /* Allow resizing */
            overflow: hidden;
            min-width: 200px;
            min-height: 50px;
        }
        
        /* New CSS for minimized state */
        .terminal-window.minimized {
            width: 200px;
            height: 30px;
            min-height: 30px;
            overflow: hidden;
            border-bottom: none;
            cursor: pointer;
        }
        .terminal-window.minimized .window-header {
            border-bottom: none;
        }
        .terminal-window.minimized .terminal-content {
            display: none;
        }
        
        /* Draggable Header Area */
        .window-header {
            background-color: #2a2a2a;
            padding: 5px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--terminal-border);
            cursor: grab; /* Indicates draggable area */
        }

        .window-controls {
            display: flex;
            gap: 5px;
            margin-right: 10px;
        }

        .control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            cursor: pointer;
        }
        .control.red { background-color: var(--red-control); }
        .control.yellow { background-color: var(--yellow-control); }
        .control.green { background-color: var(--green-control); }

        .window-title-bar {
            color: var(--white-text);
            text-align: center;
            flex-grow: 1;
            font-weight: bold;
            user-select: none; /* Prevent text selection during drag */
        }

        .terminal-content {
            padding: 10px;
            white-space: pre-wrap; 
        }

        .line { margin-bottom: 2px; line-height: 1.2; }
        .prompt { color: var(--prompt-user); }
        .prompt:before { content: 'user@vile-host://window '; color: var(--prompt-path); }
        .white-text { color: var(--white-text); }
        .output-line { color: var(--terminal-text); text-indent: 10px; }
        .cursor { /* Blink effect CSS remains */ }

        /* Positioning Terminals */
        .terminal-1 { top: 0; left: 600px; }
        .terminal-2 { top: 250px; left: 650px; box-shadow: 0 0 8px rgba(255, 64, 129, 0.5), 0 0 15px rgba(0, 255, 156, 0.2); }
        .terminal-3 { top: 500px; left: 20px; width: 400px; z-index: 30; }

        /* --- Bottom Dock (Unchanged) --- */
        .dock {
            position: fixed; bottom: 0; left: 0; width: 100%; padding: 10px 0;
            background-color: var(--dock-bg); display: flex; justify-content: center;
            z-index: 100; box-shadow: 0 -5px 15px var(--dock-shadow);
        }

        .dock-separator {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 150px; height: 2px; background-color: var(--star-color);
            box-shadow: 0 0 5px var(--star-color);
        }

        .dock-icons { display: flex; gap: 15px; }
        .dock-icon {
            width: 40px; height: 40px; background-color: var(--folder-bg);
            border: 1px solid var(--prompt-path); border-radius: 5px; display: flex;
            justify-content: center; align-items: center; font-size: 1.5em;
            cursor: pointer; color: var(--white-text);
        }
        .dock-icon.active {
            border-color: var(--terminal-border); box-shadow: 0 0 8px var(--terminal-border);
            background-color: #3e4854;
        }
    </style>
</head>
<body>

    <div class="desktop" id="desktop">
        <div class="top-bar">
            <span class="window-title">index.html</span>
            <span class="site-title">~~vile_personal site</span>
            <span class="search-icon">üîç</span>
        </div>
        
        <div class="folder-area">
            <div class="folder-group"><div class="folder-icon"></div><div class="folder-text">About Me</div></div>
            <div class="folder-group"><div class="folder-icon"></div><div class="folder-text">About Me</div></div>
            <div class="folder-group"><div class="folder-icon"></div><div class="folder-text">Projects</div></div>
            <div class="folder-group"><div class="folder-icon"></div><div class="folder-text">My Projects</div></div>
            <div class="folder-group"><div class="folder-icon"></div><div class="folder-text">Contact Info</div></div>
            <div class="folder-group"><div class="folder-icon"></div><div class="folder-text">Contact Info</div></div>
        </div>

        <div class="terminal-container">
            <div class="terminal-window terminal-1" data-window-id="t1">
                <div class="window-header">
                    <div class="window-controls">
                        <span class="control red close-btn" data-target="t1"></span>
                        <span class="control yellow minimize-btn" data-target="t1"></span>
                        <span class="control green"></span>
                    </div>
                    <span class="window-title-bar">terminal-window 1</span>
                </div>
                <div class="terminal-content">
                    <div class="line prompt"><span class="white-text">user:!lill bet s kwtmdwe</span></div>
                    <div class="line">moth lns blgging"s or sfssnt on to bont cenries"))</div>
                    <div class="line prompt">>rpl sflce hont on sid lof ouf dandgl:(:"-bags "))</div>
                </div>
            </div>

            <div class="terminal-window terminal-2" data-window-id="t2">
                <div class="window-header">
                    <div class="window-controls">
                        <span class="control red close-btn" data-target="t2"></span>
                        <span class="control yellow minimize-btn" data-target="t2"></span>
                        <span class="control green"></span>
                    </div>
                    <span class="window-title-bar">terminal-window 2</span>
                </div>
                <div class="terminal-content">
                    <div class="line prompt"><span class="white-text">user:!lill bet s kwtmdwe</span></div>
                    <div class="line">Prompt:</div>
                    <div class="line prompt">lcnar sutaise to cotput:!</div>
                </div>
            </div>

            <div class="terminal-window terminal-3" data-window-id="t3">
                <div class="window-header">
                    <div class="window-controls">
                        <span class="control red close-btn" data-target="t3"></span>
                        <span class="control yellow minimize-btn" data-target="t3"></span>
                        <span class="control green"></span>
                    </div>
                    <span class="window-title-bar">terminal-window 3</span>
                </div>
                <div class="terminal-content">
                    <div class="line prompt"><span class="white-text">merter or snsilfsiare's sts cotput ")_bags ")</span></div>
                    <div class="line">links co output</div>
                    <div class="line output-line">tare-l:!sc!ttest_fldunt tun test-id omteriale'))</div>
                    <div class="cursor"></div>
                </div>
            </div>

        </div>

        <div class="dock">
            <div class="dock-separator"></div>
            <div class="dock-icons">
                <div class="dock-icon" data-window-id="t1" data-action="toggle">üóÉÔ∏è</div>
                <div class="dock-icon" data-window-id="t2" data-action="toggle">üóÉÔ∏è</div>
                <div class="dock-icon" data-window-id="t3" data-action="toggle">üóÉÔ∏è</div>
                <div class="dock-icon active">üóé</div>
                <div class="dock-icon">üìÇ</div>
                <div class="dock-icon">‚¨áÔ∏è</div>
                <div class="dock-icon">üïì</div>
                <div class="dock-icon">üë§</div>
            </div>
        </div>
    </div>

    <script>
        // --- Star Trail Effect ---
        document.addEventListener('mousemove', (e) => {
            const colors = [
                '#ff4081', '#00ff9c', '#c592ff', '#ffbd2e'
            ];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const star = document.createElement('div');
            star.classList.add('star-trail');
            star.style.left = `${e.clientX - 5}px`;
            star.style.top = `${e.clientY - 5}px`;
            star.style.color = color;
            document.getElementById('desktop').appendChild(star);

            setTimeout(() => {
                star.remove();
            }, 800);
        });

        // --- Window Interactivity (Drag, Close, Minimize) ---

        const terminalWindows = document.querySelectorAll('.terminal-window');
        const dockIcons = document.querySelectorAll('.dock-icon[data-action="toggle"]');
        let currentZIndex = 30; // Start Z-index higher than static elements

        terminalWindows.forEach(window => {
            const header = window.querySelector('.window-header');
            makeWindowDraggable(window, header);
            
            // Bring to front on click
            window.addEventListener('mousedown', () => {
                bringToFront(window);
            });
        });

        function bringToFront(windowElement) {
            currentZIndex++;
            windowElement.style.zIndex = currentZIndex;
        }

        // 1. Dragging Functionality
        function makeWindowDraggable(windowElement, dragHandle) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            dragHandle.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                // Get the mouse cursor position at startup:
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                // Call a function whenever the cursor moves:
                document.onmousemove = elementDrag;
                
                // Bring to front when dragging starts
                bringToFront(windowElement);
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                // Calculate the new cursor position:
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                // Set the element's new position:
                let newTop = windowElement.offsetTop - pos2;
                let newLeft = windowElement.offsetLeft - pos1;

                // Simple boundary check (prevents dragging off the top/left edge)
                newTop = Math.max(0, newTop);
                newLeft = Math.max(0, newLeft);

                windowElement.style.top = newTop + "px";
                windowElement.style.left = newLeft + "px";
            }

            function closeDragElement() {
                // Stop moving when mouse button is released:
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // 2. Closing Functionality
        document.querySelectorAll('.close-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent drag starting
                const targetId = e.target.getAttribute('data-target');
                const targetWindow = document.querySelector(`.terminal-window[data-window-id="${targetId}"]`);
                
                if (targetWindow) {
                    targetWindow.style.display = 'none';
                }
            });
        });

        // 3. Minimizing/Toggle Functionality (Yellow Control and Dock)
        const minimizeAndToggle = (targetId) => {
            const targetWindow = document.querySelector(`.terminal-window[data-window-id="${targetId}"]`);
            
            if (targetWindow) {
                bringToFront(targetWindow); // Ensure it's on top when restored/toggled

                if (targetWindow.style.display === 'none') {
                    // Restore/Show
                    targetWindow.style.display = 'block';
                    targetWindow.classList.remove('minimized');
                } 
                else if (targetWindow.classList.contains('minimized')) {
                    // Restore from minimized
                    targetWindow.classList.remove('minimized');
                } 
                else {
                    // Minimize
                    targetWindow.classList.add('minimized');
                }
            }
        };

        // Yellow Minimize Button Handler
        document.querySelectorAll('.minimize-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.stopPropagation();
                const targetId = e.target.getAttribute('data-target');
                minimizeAndToggle(targetId);
            });
        });

        // Dock Icon Toggle Handler
        dockIcons.forEach(icon => {
            icon.addEventListener('click', (e) => {
                const targetId = e.target.getAttribute('data-window-id');
                minimizeAndToggle(targetId);
            });
        });
    </script>
</body>
</html>
